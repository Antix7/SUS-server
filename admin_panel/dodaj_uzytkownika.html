<!DOCTYPE html>
<html lang="pl-PL">
<head>
    <meta charset="UTF-8">
    <title>Dodawanie użytkownika</title>
</head>
<body>
    <br>
    <form action = "/panel/dodaj_uzytkownika/auth" method = "post" onsubmit = "return date_update();">
        <input type = "email" id = "email" name = "email" placeholder = "Adres e-mail"> <br>
        <input type = "checkbox" id = "czyAdmin" name = "czyAdmin"> Czy to ma być admin? <br>
        <input type = "checkbox" id = "expires" name = "expires" onclick = "change_visibility();"> Konto ma wygasać <br>
        <div id = "dateDiv" style = "Display: none; margin-top: 0.6em; margin-bottom: 0.6em">
            <input type = "date" id = "date" name = "date" onchange="date_update()"> <br>
            Zaznacz ostatni dzień, w którym konto będzie aktywne <br>
            <span id = "badDate"></span> <br>
        </div>
        <input type = "submit" value = "Dodaj">
    </form>
    <br>
    <form action = "/panel" method = "get">
        <input type = "submit" value = "Wróć">
    </form>

    <script>
        function change_visibility() {
            let checkbox = document.getElementById("expires");
            let dateDiv = document.getElementById("dateDiv");
            console.log(checkbox.checked);
            if(checkbox.checked)
                dateDiv.style.display = "block";
            else
                dateDiv.style.display = "none";
        }
        function date_update() {
            let dateDiv = document.getElementById("dateDiv");
            let date = document.getElementById("date");
            let badDate = document.getElementById("badDate");
            console.log(date.valueAsDate);
            if(dateDiv.style.display == "none")
                return true;
            if(date.valueAsDate != null) {
                badDate.innerText = "Data jest ok";
                badDate.style.color = "rgb(0, 220, 0)";
                return true;
            }
            badDate.innerText = "Data nie może być pusta!";
            badDate.style.color = "red";
            return false;

        }
    </script>
</body>
</html>